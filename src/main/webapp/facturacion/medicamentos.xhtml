<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../template/master.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="title">
        Medicamentos
    </ui:define>

    <ui:define name="content">
        <div class="container-fluid container-fullw">
            <h:form id="IdFormMedicamentos">              
                <p:growl id="IdMensajeMedicamentos"  showDetail="true" sticky="false" autoUpdate="true" life="2000"  />                        
                <section id="page-title">
                    <div class="row">
                        <div class="col-sm-8">
                            <h1 class="mainTitle">Medicamentos</h1>
                        </div>
                        <ol class="breadcrumb">
                            <li>
                                <span>Configuración</span>
                            </li>
                            <li>
                                <span>Facturación</span>
                            </li>
                            <li class="active">
                                <span>Medicamentos</span>
                            </li>
                        </ol>
                    </div>
                </section>
                <p:commandButton 
                    title="Nuevo medicamento" icon="fa fa-fw fa-plus-circle"
                    styleClass="icon-new fg-lightBlue bg-white no-border"
                    actionListener="#{medicamentosMB.limpiarFormularioMedicamentos}"
                    update=":IdFormMedicamentos"
                    style="font-size: 20px; width: 30px; height: 40px; "/> 
                &nbsp;
                <p:commandButton
                    title="Buscar medicamentos" icon="fa fa-fw fa-search"
                    styleClass="icon-search fg-lightBlue bg-white no-border"                     
                    actionListener="#{medicamentosMB.buscarMedicamentos}"
                    style="font-size: 20px; width: 30px; height: 40px; "/> 
                &nbsp;
                <p:commandButton
                    title="Eliminar medicamento" icon="fa fa-fw fa-remove"
                    styleClass="icon-cancel fg-lightBlue bg-white no-border"  
                    actionListener="#{medicamentosMB.eliminarMedicamento}"
                    style="font-size: 20px; width: 30px; height: 40px; "/> 
                &nbsp;
                <p:commandButton 
                    title="Guardar/Actualizar medicamento" icon="fa fa-fw fa-save"
                    styleClass="icon-floppy fg-lightBlue bg-white no-border" 
                    actionListener="#{medicamentosMB.guardarMedicamento}"                    
                    style="font-size: 20px; width: 30px; height: 40px; "/>  
                <p:tabView id="IdTabView" style=" width: 95%;  margin-left: 15px;">                 
                    <p:tab title="#{medicamentosMB.tituloTabMedicamentos}">                    
                        <div class="row">
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoObligatorio" value="Código Medicamento"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.codigoMedicamento}"  maxlength="20" placeholder="Código Medicamento"/>                    
                                </div>
                            </div>
                            <div class="col-lg-9 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoObligatorio" value="Nombre Medicamento"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.nombreMedicamento}" maxlength="100" placeholder="Nombre Medicamento"/>
                                </div>
                            </div>
                        </div>
                        <!--.row-->
                        <div class="row">
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Código Cums"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.codigoCums}" maxlength="20" placeholder="Código Cums"/>
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Código Cups"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.codigoCups}"  maxlength="20" placeholder="Código Cups"/>                              
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Tipo medicamento"/><br />
                                    <p:selectBooleanButton styleClass="form-control" value="#{medicamentosMB.pos}" onLabel="POS" offLabel="NO POS" style="width:82px"/>
                                </div>
                            </div>
                        </div>
                        <!--.row-->
                        <div class="row">
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Nombre Genérico"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.nombreGenerico}" maxlength="100" placeholder="Nombre Genérico"/>
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Nombre Comercial"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.nombreComercial}" maxlength="100" placeholder="Nombre Comercial"/>
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Forma medicamento"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.formaMedicamento}"  maxlength="100" placeholder="Forma Medicamento"/>

                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Concentración"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.concentracion}"  maxlength="10" placeholder="Concentración"/>
                                </div>
                            </div>
                        </div>
                        <!--.row-->
                        <div class="row">
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Unidad medida"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.unidadMedida}" maxlength="10" placeholder="Unidad de Medida"/>
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoNoObligatorio" value="Control médico"/><br />
                                    <p:selectBooleanButton styleClass="form-control" value="#{medicamentosMB.controlMedico}" onLabel="SI" offLabel="NO" style="width:40px" />
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoObligatorio" value="Registro sanitario"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.registroSanitario}" maxlength="50" />
                                </div>
                            </div>
                        </div>
                        <!--.row-->
                        <div class="row">
                            <div class="col-lg-6 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoObligatorio" value="Modo admministración"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.modAdmin}" maxlength="50" placeholder="Modo Admnistración"/>
                                </div>
                            </div>
                            <div class="col-lg-3 col-xs-12">
                                <div class="form-group">
                                    <p:outputLabel  styleClass="campoObligatorio" value="Valor"/>
                                    <p:inputText    styleClass="form-control" value="#{medicamentosMB.valor}" placeholder="Valor"/>                            
                                </div>
                            </div>
                        </div>
                    </p:tab>
                </p:tabView>
                <p:dialog id="IdDialogoBuscarMedicamentos" header="BUSCAR MEDICAMENTOS" widgetVar="dialogoBuscarMedicamentos" resizable="false" modal="true">                
                <table>
                    <tr>
                        <td>
                            <p:dataTable 
                                id="IdTablaMedicamentos" 
                                var="medicamento" 
                                widgetVar="wvTablaMedicamentos"
                                value="#{medicamentosMB.listaMedicamentos}" 
                                rowKey="#{medicamento.idMedicamento}"  
                                selection="#{medicamentosMB.medicamentoSeleccionadoTabla}" 
                                paginator="true"
                                style="width: 600px; height: 300px;"
                                rows="10"                                    
                                paginatorPosition="bottom"                                
                                emptyMessage="No hay medicamentos"
                                scrollable="true" 
                                currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"                                
                                pageLinks="5"
                                selectionMode="single"
                                resizableColumns="true">                                                                                               
                                <p:column headerText="CODIGO" filterBy="#{medicamento.codigoMedicamento}" filterMatchMode="contains">
                                    #{medicamento.codigoMedicamento}
                                </p:column>                                
                                <p:column headerText="NOMBRE" filterBy="#{medicamento.nombreMedicamento}" filterMatchMode="contains">
                                    #{medicamento.nombreMedicamento}
                                </p:column>                                
                                <p:column headerText="FORMA"  filterBy="#{medicamento.formaMedicamento}" filterMatchMode="contains">
                                    #{medicamento.formaMedicamento}
                                </p:column>                                
                            </p:dataTable>  
                        </td>    
                    </tr>
                    <tr>
                        <td>
                            <br/>
                            <p:commandButton value="Cargar medicamento" update=":IdFormMedicamentos" actionListener="#{medicamentosMB.cargarMedicamento}"/>
                        </td>    
                    </tr>
                </table>
            </p:dialog> 
            <p:dialog id="IdDialogoEliminarMedicamento" header="ELIMINAR MEDICAMENTO" widgetVar="dialogoEliminarMedicamento" resizable="false" modal="true">  
                <p:panelGrid id="panelEliminarMedicamento" styleClass="panelGridSinBordes" columns="1">
                    <h:outputText value="¿ Confirma La eliminación de este medicamento ?"/>                    
                    <p:commandButton 
                        value="Eliminar" 
                        oncomplete="PF('dialogoEliminarMedicamento').hide();"
                        actionListener="#{medicamentosMB.confirmarEliminarMedicamento}"                        
                        update=":IdFormMedicamentos"/>
                </p:panelGrid>
            </p:dialog>                         
            </h:form>
        </div>
    </ui:define>

</ui:composition>
